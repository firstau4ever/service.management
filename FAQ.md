# Часто задаваемые вопросы (FAQ)

## 1. Установит ли скрипт недостающие пакеты автоматически?

**Да, скрипт теперь автоматически устанавливает недостающие пакеты:**

- ✅ **Python3** - если отсутствует
- ✅ **python3-pip** - если отсутствует  
- ✅ **python3-venv** - для Ubuntu/Debian систем

Скрипт определяет менеджер пакетов (apt/yum/dnf) и устанавливает пакеты автоматически.

**Что НЕ устанавливается автоматически:**
- ❌ Веб-сервер (Nginx/Apache) - опционально
- ❌ Утилиты для проверки портов (ss/netstat/lsof) - обычно уже есть в системе
- ❌ SSL сертификаты - нужно настраивать отдельно

Если автоматическая установка не удалась, скрипт покажет инструкции по ручной установке.

## 2. Что будет, если на сервере нет Nginx/Apache?

**Приложение будет работать, но с ограничениями:**

### Без веб-сервера (Nginx/Apache):
- ✅ Приложение запустится на `127.0.0.1:5000` (или другом свободном порту)
- ✅ Можно обращаться напрямую: `http://127.0.0.1:5000/servise/status/...`
- ❌ **НЕ будет работать через домен** (например, `https://mo.medaccreditation.online/servise/...`)
- ❌ Нет проксирования и балансировки
- ❌ Нет SSL/TLS терминации

### Если используется другой веб-сервер на Python:
Если на сервере уже работает другой Python веб-сервер (например, другой Flask/Gunicorn на порту 5000):

1. **Конфликт портов:** Скрипт автоматически найдет свободный порт (5001, 5002 и т.д.)
2. **Нужно настроить проксирование вручную** в вашем веб-сервере:
   - Если используете другой Nginx - добавьте location блок
   - Если используете другой Apache - добавьте Location блок
   - Если используете другой Python веб-сервер - настройте проксирование в нем

### Пример настройки для другого веб-сервера:

**Если у вас уже есть Nginx с другими проектами:**
```nginx
# Добавьте в существующий server блок
location /servise/ {
    proxy_pass http://127.0.0.1:5001;  # Используйте порт, который выбрал скрипт
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
```

**Если используете другой Python веб-сервер (например, другой Flask):**
Можно настроить проксирование через тот же Gunicorn или использовать встроенный прокси в вашем приложении.

## 3. Не помешает ли установка другим проектам на сервере?

**Нет, установка спроектирована так, чтобы не мешать другим проектам:**

### Изоляция:
- ✅ **Отдельная директория:** `/opt/service-management`
- ✅ **Отдельное виртуальное окружение Python:** изолированные зависимости
- ✅ **Отдельный systemd сервис:** независимое управление
- ✅ **Локальный порт:** приложение слушает только на `127.0.0.1` (localhost)
- ✅ **Отдельный пользователь:** работает от `www-data` (стандартный для веб-серверов)

### Что НЕ конфликтует:
- ❌ Порты: скрипт проверяет занятость и выбирает свободный
- ❌ Python зависимости: виртуальное окружение изолирует пакеты
- ❌ Системные сервисы: отдельный systemd unit файл
- ❌ Файлы: все в `/opt/service-management`

### Потенциальные моменты внимания:

1. **Пользователь www-data:**
   - Если другие проекты тоже используют `www-data` - это нормально
   - Все проекты могут работать от одного пользователя

2. **Sudoers файл:**
   - Создается `/etc/sudoers.d/service-management`
   - Не конфликтует с другими sudoers файлами
   - Дает права только на systemctl команды

3. **Веб-сервер конфигурация:**
   - Если добавляете location блок вручную - убедитесь, что путь `/servise/` не конфликтует с другими проектами
   - Можно изменить путь в коде приложения, если нужно

4. **Порты:**
   - По умолчанию 5000, но скрипт автоматически найдет свободный
   - Можно задать вручную: `export SERVICE_MANAGEMENT_PORT=5001`

## Рекомендации

### Для продакшена:
1. ✅ Используйте веб-сервер (Nginx/Apache) для проксирования
2. ✅ Настройте SSL/TLS сертификат
3. ✅ Используйте firewall для ограничения доступа
4. ✅ Регулярно обновляйте зависимости

### Для изоляции:
1. ✅ Виртуальное окружение Python - уже используется
2. ✅ Отдельный пользователь - уже настроено
3. ✅ Отдельная директория - `/opt/service-management`

### Для безопасности:
1. ✅ Используйте сильный токен
2. ✅ Ограничьте доступ к порту приложения только с localhost
3. ✅ Используйте HTTPS для всех запросов
4. ✅ Настройте fail2ban для защиты от брутфорса

## 5. Нужен ли домен для работы приложения?

**Нет, домен не нужен!** Приложение работает на `127.0.0.1:порт` и не требует домена.

### Что делает скрипт:

- ✅ Устанавливает приложение на `127.0.0.1:порт` (по умолчанию 5000)
- ✅ Показывает примеры адресов для локального использования
- ✅ Предоставляет примеры конфигурации для веб-сервера (Nginx/Apache)

### Настройка веб-сервера (опционально):

Если вы хотите использовать API через домен, настройте веб-сервер самостоятельно:
1. Добавьте конфигурацию в Nginx/Apache (скрипт покажет примеры)
2. Настройте DNS для вашего домена
3. Настройте SSL сертификат (если нужен HTTPS)

Скрипт не запрашивает домен и не настраивает веб-сервер автоматически - вы делаете это сами по необходимости.

