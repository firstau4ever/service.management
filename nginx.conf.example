# Пример конфигурации Nginx для Service Management API
# Этот блок нужно добавить в существующий server блок для mo.medaccreditation.online
# 
# ВАЖНО: Замените 5000 на фактический порт, используемый приложением
# (скрипт deploy.sh автоматически определит и покажет используемый порт)

# Location для Service Management API
location /servise/ {
    # Проксирование на локальный Flask/Gunicorn сервер
    # Порт может отличаться от 5000, если он был занят при установке
    proxy_pass http://127.0.0.1:5000;
    
    # Заголовки для правильной работы прокси
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    # Таймауты
    proxy_connect_timeout 60s;
    proxy_send_timeout 60s;
    proxy_read_timeout 60s;
    
    # Отключение буферизации для реального времени
    proxy_buffering off;
}

